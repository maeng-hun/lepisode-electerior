<button
  type="button"
  class="flex w-full cursor-pointer items-center justify-between rounded-md px-5 py-2 hover:bg-gray-100"
  (click)="clickParentMenu()"
  [ngClass]="{
    'bg-blue-100 text-blue-500': selectedMenuLabel() === menu().label || isActive()
  }"
>
  <div class="flex items-center gap-2">
    @if (menu().icon) {
      <img class="size-5" [src]="menu().icon" alt="메뉴 아이콘" />
    }
    <span class="whitespace-nowrap">{{ menu().label }}</span>
  </div>

  @if (menu().children && menu().children?.length) {
    <img
      class="size-6 transform transition-transform duration-300"
      [ngClass]="selectedMenuLabel() === menu().label ? 'rotate-180' : ''"
      src="https://api.iconify.design/material-symbols:keyboard-arrow-up.svg"
      alt="chevron 아이콘"
    />
  }
</button>

@if (selectedMenuLabel() === menu().label && menu().children && menu().children?.length) {
  <ul class="mt-1 ml-6 flex flex-col gap-1 border-l pl-4 text-sm">
    @for (child of menu().children; track child.label) {
      <li>
        <a
          class="flex items-center rounded-md px-4 py-2 hover:bg-gray-100"
          [routerLink]="child.route"
          routerLinkActive="bg-blue-100 text-blue-500"
          [routerLinkActiveOptions]="{ exact: true }"
          (click)="menuState.setParentLabel(menu().label); menuState.setChildLabel(child.label)"
        >
          {{ child.label }}
        </a>
      </li>
    }
  </ul>
}
